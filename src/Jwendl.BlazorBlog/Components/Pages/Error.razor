@page "/Error"
@using System.Diagnostics

<PageTitle>Error</PageTitle>

<MudText Typo="Typo.h1">Error</MudText>
<MudText Typo="Typo.h2">An error occurred while processing your request.</MudText>

@if (ShowRequestId)
{
    <MudText Typo="Typo.body1">Request ID: @RequestId</MudText>
}

<MudText Typo="Typo.h3">Development Mode</MudText>
<MudText Typo="Typo.body1">
    Swapping to Development environment will display more detailed information about the error that occurred.
</MudText>
<MudText Typo="Typo.body1">
    The Development environment shouldn't be enabled for deployed applications.
    It can result in displaying sensitive information from exceptions to end users.
    For local debugging, enable the Development environment by setting the ASPNETCORE_ENVIRONMENT environment variable to Development
    and restarting the app.
</MudText>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
